---
title: "02 Lang"
date: 2021-09-17T17:05:30+08:00
draft: false
author: Sunny
weight: 2
---

设计思路：

- 设计语法。
- 策略：先设计出一个简化的成品，再逐步改良。

## 2.1 麻雀虽小、五脏俱全的语言

至少要具备哪些语法功能：

- 整数四则运算。
- 字符串处理。
- 支持变量：无需事先声名，无需指定类型。
- 流程控制语句：if，while。
- 语句以换行符或分号（；）结尾。
- 最后一条语句的结果作为（一段）程序的结果（无需 return）。
- 使用一对大括号（{}）包裹语句块（多条语句）。如果语句块中只有一条语句，大括号可以省略。
- 条件表达式无需使用括号包裹。如：if v > 0 { ... }。

## 2.2 句尾的分号

分号的特殊性：

- 分号是语句之间的分隔符。因此 `{ x = 1; y = 2; }` 这个语句块中包含 3 条语句，而不是 2 条。

对换行符的约定：

- 换行符不会简单的当做空白符处理，而是会切分为语句。
- 表达式和语句不能中途换行。

if 表达式换行风格：

```
if i % 2 == 0 {
    even = even + 1
} else {
    odd = odd + 1
}
```

while 表达式风格：

```
while i % 2 == 0 {
    even = even + 1
}
```

## 2.3 含糊不得的语言

不得不考虑的问题，避免出现的歧义：

- 减少语法功能。

